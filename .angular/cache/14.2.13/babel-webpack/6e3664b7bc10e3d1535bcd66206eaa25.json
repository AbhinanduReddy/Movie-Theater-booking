{"ast":null,"code":"import _regeneratorRuntime from \"/Users/prakhyamylavaram/Desktop/SJSU/CMPE-202/Project_Theater/Movie-Theater-booking/ui-components/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _classCallCheck from \"/Users/prakhyamylavaram/Desktop/SJSU/CMPE-202/Project_Theater/Movie-Theater-booking/ui-components/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/prakhyamylavaram/Desktop/SJSU/CMPE-202/Project_Theater/Movie-Theater-booking/ui-components/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { __awaiter } from \"tslib\";\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { AuthenticationService } from 'app/services/authentication.service';\nimport { TheaterService } from 'app/services/theater.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/services/authentication.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"app/services/theater.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"primeng/checkbox\";\nimport * as i8 from \"primeng/dialog\";\nimport * as i9 from \"primeng/button\";\n\nfunction SeatsComponent_li_9_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\")(1, \"span\", 4);\n    i0.ɵɵtext(2, \"Use Rewards Points\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 5)(4, \"p-checkbox\", 25);\n    i0.ɵɵlistener(\"onChange\", function SeatsComponent_li_9_Template_p_checkbox_onChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      var ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.checkboxselection($event));\n    })(\"ngModelChange\", function SeatsComponent_li_9_Template_p_checkbox_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      var ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.selectedValues = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"number\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.selectedValues);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"$\", i0.ɵɵpipeBind2(6, 2, ctx_r0.auth.user == null ? null : ctx_r0.auth.user.rewards, \"1.2-2\"), \" \");\n  }\n}\n\nvar _c0 = function _c0(a0, a1) {\n  return {\n    \"selected\": a0,\n    \"blocked\": a1\n  };\n};\n\nfunction SeatsComponent_div_59_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵlistener(\"click\", function SeatsComponent_div_59_div_1_Template_div_click_0_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r12);\n      var seat_r9 = restoredCtx.$implicit;\n      var ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.isSeatBlocked(seat_r9) ? null : ctx_r11.toggleSelection(seat_r9));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var seat_r9 = ctx.$implicit;\n    var ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c0, ctx_r8.isSeatSelected(seat_r9), ctx_r8.isSeatBlocked(seat_r9)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", seat_r9, \" \");\n  }\n}\n\nfunction SeatsComponent_div_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, SeatsComponent_div_59_div_1_Template, 2, 5, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var row_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", row_r6);\n  }\n}\n\nfunction SeatsComponent_span_82_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"(no service fee for premium users)\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nvar _c1 = function _c1() {\n  return {\n    \"width\": \"700px\",\n    \"height\": \"400px\"\n  };\n};\n\nvar _c2 = function _c2() {\n  return {\n    \"width\": \"50vw\"\n  };\n};\n\nvar _c3 = function _c3() {\n  return {\n    \"width\": \"300px\"\n  };\n};\n\nexport var SeatsComponent = /*#__PURE__*/(function () {\n  var SeatsComponent = /*#__PURE__*/function () {\n    function SeatsComponent(auth, router, http, theaterSvc) {\n      _classCallCheck(this, SeatsComponent);\n\n      this.auth = auth;\n      this.router = router;\n      this.http = http;\n      this.theaterSvc = theaterSvc;\n      this.showSeatLimitWarning = false;\n      this.onlineServicefee = 0;\n      this.totalCost = 0;\n      this.block_seats = [];\n      this.total = 0;\n      this.rewardsUsed = 0;\n      this.confirmationVisible = false;\n      this.currentDate = new Date();\n      this.dates = [];\n      this.selectedDate = null; // Store the selected date\n\n      this.display = false;\n      this.isTue = false;\n      this.discountPercentage = 0;\n      this.tueDiscount = false;\n      this.sixPMDiscount = false;\n      this.discountValue = 0;\n      this.isbeforeSix = false;\n      this.confirmationData = {\n        movieTitle: '',\n        showDate: new Date(),\n        showTime: '',\n        seats: [],\n        totalCost: 0,\n        rewardsUsed: 0\n      };\n      this.rows = 0; // Number of rows\n\n      this.columns = 0; // Number of columns\n\n      this.selectedSeats = [];\n    }\n\n    _createClass(SeatsComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        console.log('opay');\n        console.log(this.theaterSvc.selected_date);\n        console.log(this.theaterSvc.selected_screen.show_time);\n        var calendar = new Date(this.theaterSvc.selected_date);\n        var show_time = new Date(this.theaterSvc.selected_screen.show_time); // Extract date from calendar and time from show_time\n\n        this.combinedTimestamp = new Date(calendar.getFullYear(), calendar.getMonth(), calendar.getDate(), show_time.getUTCHours(), show_time.getUTCMinutes(), show_time.getUTCSeconds(), show_time.getUTCMilliseconds()).toISOString();\n        var targetTime = new Date(this.combinedTimestamp);\n        targetTime.setHours(18, 0, 0, 0);\n        var ct = new Date(this.combinedTimestamp);\n        ct.setHours(ct.getHours() - 8);\n        ct.getHours() < 18 ? this.isbeforeSix = true : this.isbeforeSix = false;\n\n        if (targetTime.getDay() === 2) {\n          this.isTue = true;\n        }\n\n        console.log(ct);\n        console.log(targetTime);\n        console.log(this.isTue, this.isbeforeSix);\n        var params = new HttpParams();\n        params = params.append('movie_id', this.theaterSvc.selected_movie);\n        params = params.append('theater_id', this.theaterSvc.selected_theater);\n        params = params.append('screen_id', this.theaterSvc.selected_screen.screen_id);\n        params = params.append('show_time', this.combinedTimestamp);\n        this.http.get('/api/theaters/booked_seats', {\n          params: params\n        }).subscribe(function (data) {\n          _this.block_seats = data;\n        });\n        this.http.get('/api/theaters/theater_screen/seats', {\n          params: params\n        }).subscribe(function (res) {\n          _this.rows = res[0].rows;\n          _this.columns = res[0].columns;\n        });\n        this.http.get('/api/ticket/discount').subscribe(function (res) {\n          var _a, _b;\n\n          _this.tueDiscount = ((_a = res === null || res === void 0 ? void 0 : res.discount) === null || _a === void 0 ? void 0 : _a.tuesday) ? true : false;\n          _this.sixPMDiscount = ((_b = res === null || res === void 0 ? void 0 : res.discount) === null || _b === void 0 ? void 0 : _b.sixPM) ? true : false;\n          _this.discountPercentage = res === null || res === void 0 ? void 0 : res.percentage;\n        });\n        console.log(this.generateSeatMatrix());\n        var navbar = document.getElementsByTagName('nav')[0];\n        navbar.classList.add('navbar-transparent');\n      }\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {\n        var navbar = document.getElementsByTagName('nav')[0];\n        navbar.classList.remove('navbar-transparent');\n      }\n    }, {\n      key: \"generateSeatMatrix\",\n      value: function generateSeatMatrix() {\n        var _this2 = this;\n\n        return Array.from({\n          length: this.rows\n        }, function (_, row) {\n          return Array.from({\n            length: _this2.columns\n          }, function (_, col) {\n            return row * _this2.columns + col + 1;\n          });\n        });\n      }\n    }, {\n      key: \"toggleSelection\",\n      value: function toggleSelection(seatNumber) {\n        var _a, _b;\n\n        var index = this.selectedSeats.indexOf(seatNumber);\n\n        if (index === -1 && this.selectedSeats.length < 8) {\n          this.selectedSeats.push(seatNumber);\n        } else if (index !== -1) {\n          this.selectedSeats.splice(index, 1);\n        } else if (this.selectedSeats.length >= 8) {\n          this.showSeatLimitWarning = true;\n        } else {\n          this.selectedSeats.splice(index, 1);\n        }\n\n        console.log((_a = this.auth.user) === null || _a === void 0 ? void 0 : _a.role, 'pretest');\n\n        if (((_b = this.auth.user) === null || _b === void 0 ? void 0 : _b.role) !== 'premium') {\n          this.onlineServicefee = 1.5;\n        }\n\n        console.log(this.theaterSvc.selected_screen);\n        console.log('discoutn check');\n        console.log(this.tueDiscount, this.isTue, this.isbeforeSix, this.sixPMDiscount);\n\n        if (this.tueDiscount && this.isTue || this.isbeforeSix && this.sixPMDiscount) {\n          this.discountValue = this.theaterSvc.selected_screen.cost * this.selectedSeats.length * (this.discountPercentage / 100);\n        }\n\n        this.totalCost = this.theaterSvc.selected_screen.cost * this.selectedSeats.length - this.discountValue;\n      }\n    }, {\n      key: \"isSeatSelected\",\n      value: function isSeatSelected(seatNumber) {\n        return this.selectedSeats.includes(seatNumber);\n      }\n    }, {\n      key: \"isSeatBlocked\",\n      value: function isSeatBlocked(seat) {\n        return this.block_seats.includes(+seat);\n      }\n    }, {\n      key: \"Book\",\n      value: function Book() {\n        this.total = this.totalCost + this.onlineServicefee;\n        this.display = true;\n      }\n    }, {\n      key: \"Pay\",\n      value: function Pay() {\n        var _this3 = this;\n\n        var _a;\n\n        var headers = new HttpHeaders({\n          'Content-Type': 'application/json'\n        });\n\n        if ((_a = this.auth.user) === null || _a === void 0 ? void 0 : _a.token) {\n          headers = headers.set('Authorization', this.auth.user.token);\n        }\n\n        var body = {\n          \"movie_id\": this.theaterSvc.selected_movie,\n          \"show_time\": this.combinedTimestamp,\n          \"screen_id\": this.theaterSvc.selected_screen.screen_id,\n          \"seats\": this.selectedSeats,\n          \"total_cost\": this.totalCost + this.onlineServicefee,\n          \"rewards_used\": this.rewardsUsed,\n          \"theater_id\": this.theaterSvc.selected_theater\n        };\n        this.http.post('/api/ticket', body, {\n          headers: headers\n        }).subscribe(function (res) {\n          return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n            var _this4 = this;\n\n            var _b;\n\n            return _regeneratorRuntime().wrap(function _callee$(_context) {\n              while (1) switch (_context.prev = _context.next) {\n                case 0:\n                  console.log(res); // Update confirmation data here\n\n                  this.confirmationData = {\n                    movieTitle: this.theaterSvc.selected_movie.title,\n                    showDate: this.theaterSvc.selected_date,\n                    showTime: this.combinedTimestamp,\n                    seats: this.selectedSeats,\n                    totalCost: this.totalCost,\n                    rewardsUsed: this.rewardsUsed\n                  }; // Show confirmation dialog\n\n                  this.confirmationVisible = true; // Handle user rewards update and navigation\n\n                  if ((_b = this.auth.user) === null || _b === void 0 ? void 0 : _b.token) {\n                    this.http.get('/api/user/rewards', {\n                      headers: headers\n                    }).subscribe(function (res) {\n                      _this4.auth.user.rewards = res.rewards; // Consider moving navigation so it only happens once the dialog is closed\n                    });\n                  } else {\n                    this.router.navigate(['/']);\n                  }\n\n                case 4:\n                case \"end\":\n                  return _context.stop();\n              }\n            }, _callee, this);\n          }));\n        });\n      }\n    }, {\n      key: \"afterConfirmationClose\",\n      value: function afterConfirmationClose() {\n        // Here you can handle what happens after the dialog is closed\n        // For instance, navigate away or reset the component state\n        this.router.navigate(['/']); // This navigates to the home page\n      }\n    }, {\n      key: \"checkboxselection\",\n      value: function checkboxselection($event) {\n        var _a, _b, _c;\n\n        console.log($event);\n\n        if ($event.checked.length > 0) {\n          if (this.total > ((_a = this.auth.user) === null || _a === void 0 ? void 0 : _a.rewards)) {\n            this.total = this.total - ((_b = this.auth.user) === null || _b === void 0 ? void 0 : _b.rewards);\n            this.rewardsUsed = (_c = this.auth.user) === null || _c === void 0 ? void 0 : _c.rewards;\n          } else {\n            this.rewardsUsed = this.total;\n            this.total = 0;\n          }\n        } else {\n          this.total = this.total + this.rewardsUsed;\n          this.rewardsUsed = 0;\n        }\n      }\n    }]);\n\n    return SeatsComponent;\n  }();\n\n  SeatsComponent.ɵfac = function SeatsComponent_Factory(t) {\n    return new (t || SeatsComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject(i4.TheaterService));\n  };\n\n  SeatsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SeatsComponent,\n    selectors: [[\"app-seats\"]],\n    decls: 97,\n    vars: 39,\n    consts: [[\"filter-color\", \"orange\", 1, \"page-header\", \"login-page\", \"navbar-transparent\"], [1, \"page-header-image\"], [\"header\", \"Payment Gateway\", 3, \"visible\", \"visibleChange\"], [1, \"list-pay\"], [1, \"label-pay\"], [1, \"value\"], [4, \"ngIf\"], [\"target\", \"_blank\", 1, \"nav-link\", \"btn\", \"btn-neutral\", 3, \"click\"], [\"header\", \"Confirmation\", 3, \"visible\", \"modal\", \"visibleChange\", \"onHide\"], [1, \"centered-container\"], [\"src\", \"assets/img/confirmation_icon.png\", \"width\", \"200\", \"height\", \"200\"], [\"type\", \"button\", \"label\", \"Close\", 3, \"click\"], [\"header\", \"Seat Selection Limit\", 3, \"visible\", \"modal\", \"visibleChange\"], [\"type\", \"button\", \"pButton\", \"\", \"label\", \"OK\", 3, \"click\"], [1, \"container\"], [1, \"container\", \"mt-5\"], [1, \"col-22\", \"mb-4\"], [1, \"card-container\"], [1, \"split-container\", 2, \"background-color\", \"rgba(103, 18, 18, 0.808)\"], [1, \"left-side\"], [1, \"seat-container\"], [\"class\", \"seat-row\", 4, \"ngFor\", \"ngForOf\"], [1, \"right-side\"], [1, \"list\", 2, \"float\", \"right\", \"width\", \"70%\"], [1, \"label\"], [\"name\", \"groupname\", \"value\", \"rewardpoints\", 3, \"ngModel\", \"onChange\", \"ngModelChange\"], [1, \"seat-row\"], [\"class\", \"seat\", \"style\", \"padding: 10px; size: 70%; color:black\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"seat\", 2, \"padding\", \"10px\", \"size\", \"70%\", \"color\", \"black\", 3, \"ngClass\", \"click\"]],\n    template: function SeatsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"p-dialog\", 2);\n        i0.ɵɵlistener(\"visibleChange\", function SeatsComponent_Template_p_dialog_visibleChange_2_listener($event) {\n          return ctx.display = $event;\n        });\n        i0.ɵɵelementStart(3, \"ul\", 3)(4, \"li\")(5, \"span\", 4);\n        i0.ɵɵtext(6, \" Seats:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"span\", 5);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(9, SeatsComponent_li_9_Template, 7, 5, \"li\", 6);\n        i0.ɵɵelementStart(10, \"li\")(11, \"span\", 4);\n        i0.ɵɵtext(12, \"Total Cost:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"span\", 5);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"li\")(16, \"a\", 7);\n        i0.ɵɵlistener(\"click\", function SeatsComponent_Template_a_click_16_listener() {\n          return ctx.Pay();\n        });\n        i0.ɵɵtext(17, \"Pay\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(18, \"p-dialog\", 8);\n        i0.ɵɵlistener(\"visibleChange\", function SeatsComponent_Template_p_dialog_visibleChange_18_listener($event) {\n          return ctx.confirmationVisible = $event;\n        })(\"onHide\", function SeatsComponent_Template_p_dialog_onHide_18_listener() {\n          return ctx.afterConfirmationClose();\n        });\n        i0.ɵɵelementStart(19, \"div\")(20, \"div\", 9);\n        i0.ɵɵelement(21, \"img\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"h3\");\n        i0.ɵɵtext(23, \"Booking Details\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"p\")(25, \"strong\");\n        i0.ɵɵtext(26, \"Movie Title:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(27);\n        i0.ɵɵelementStart(28, \"strong\");\n        i0.ɵɵtext(29, \" Seats Selected:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(30);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"p\")(32, \"strong\");\n        i0.ɵɵtext(33, \"Total Cost:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(34);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"p\");\n        i0.ɵɵtext(36);\n        i0.ɵɵpipe(37, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"p\");\n        i0.ɵɵtext(39);\n        i0.ɵɵpipe(40, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function SeatsComponent_Template_button_click_41_listener() {\n          ctx.confirmationVisible = false;\n          return ctx.afterConfirmationClose();\n        });\n        i0.ɵɵtext(42, \"Close\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(43, \"p-dialog\", 12);\n        i0.ɵɵlistener(\"visibleChange\", function SeatsComponent_Template_p_dialog_visibleChange_43_listener($event) {\n          return ctx.showSeatLimitWarning = $event;\n        });\n        i0.ɵɵelementStart(44, \"div\")(45, \"p\");\n        i0.ɵɵtext(46, \"You can select a maximum of 8 seats.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function SeatsComponent_Template_button_click_47_listener() {\n          return ctx.showSeatLimitWarning = false;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(48, \"div\", 14);\n        i0.ɵɵelement(49, \"br\")(50, \"br\")(51, \"br\");\n        i0.ɵɵelementStart(52, \"div\", 15)(53, \"h1\", 16);\n        i0.ɵɵtext(54, \"Seats\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"div\", 17)(56, \"div\", 18)(57, \"div\", 19)(58, \"div\", 20);\n        i0.ɵɵtemplate(59, SeatsComponent_div_59_Template, 2, 1, \"div\", 21);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(60, \"div\", 22)(61, \"ul\", 23)(62, \"li\")(63, \"span\", 24);\n        i0.ɵɵtext(64, \" One Seat Cost:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(65, \"span\", 5);\n        i0.ɵɵtext(66);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(67, \"li\")(68, \"span\", 24);\n        i0.ɵɵtext(69, \" Seats:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(70, \"span\", 5);\n        i0.ɵɵtext(71);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(72, \"li\")(73, \"span\", 24);\n        i0.ɵɵtext(74, \" Seat Cost:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(75, \"span\", 5);\n        i0.ɵɵtext(76);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(77, \"li\")(78, \"span\", 24);\n        i0.ɵɵtext(79, \"Online Service fee:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(80, \"span\", 5);\n        i0.ɵɵtext(81);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(82, SeatsComponent_span_82_Template, 2, 0, \"span\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(83, \"li\")(84, \"span\", 24);\n        i0.ɵɵtext(85, \"Discount:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(86, \"span\", 5);\n        i0.ɵɵtext(87);\n        i0.ɵɵpipe(88, \"number\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(89, \"li\")(90, \"span\", 24);\n        i0.ɵɵtext(91, \"Total Cost:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(92, \"span\", 5);\n        i0.ɵɵtext(93);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(94, \"li\")(95, \"a\", 7);\n        i0.ɵɵlistener(\"click\", function SeatsComponent_Template_a_click_95_listener() {\n          return ctx.Book();\n        });\n        i0.ɵɵtext(96, \"Book\");\n        i0.ɵɵelementEnd()()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(36, _c1));\n        i0.ɵɵproperty(\"visible\", ctx.display);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.selectedSeats.join(\", \"));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.auth.user == null ? null : ctx.auth.user.rewards) > 0);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"$\", ctx.total, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(37, _c2));\n        i0.ɵɵproperty(\"visible\", ctx.confirmationVisible)(\"modal\", true);\n        i0.ɵɵadvance(9);\n        i0.ɵɵtextInterpolate1(\" \", ctx.confirmationData.movieTitle, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", ctx.confirmationData.seats.join(\", \"), \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" $\", ctx.confirmationData.totalCost, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Show Date: \", i0.ɵɵpipeBind2(37, 27, ctx.confirmationData.showDate, \"fullDate\"), \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Show Time: \", i0.ɵɵpipeBind2(40, 30, ctx.confirmationData.showTime, \"shortTime\"), \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(38, _c3));\n        i0.ɵɵproperty(\"visible\", ctx.showSeatLimitWarning)(\"modal\", true);\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"ngForOf\", ctx.generateSeatMatrix());\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.theaterSvc.selected_screen.cost);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.selectedSeats.join(\", \"));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" $\", ctx.theaterSvc.selected_screen.cost * ctx.selectedSeats.length, \"\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"$\", ctx.onlineServicefee, \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.auth.user == null ? null : ctx.auth.user.role) == \"premium\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"$\", i0.ɵɵpipeBind2(88, 33, ctx.discountValue, \"1.2-2\"), \"\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\"$\", ctx.totalCost + ctx.onlineServicefee, \"\");\n      }\n    },\n    dependencies: [i5.NgClass, i5.NgForOf, i5.NgIf, i6.NgControlStatus, i6.NgModel, i7.Checkbox, i8.Dialog, i9.ButtonDirective, i5.DecimalPipe, i5.DatePipe],\n    styles: [\".seat-container[_ngcontent-%COMP%]{flex-wrap:wrap;gap:5px}.page-header-image[_ngcontent-%COMP%]{background-image:url(bg_img.jpeg);background-size:cover;background-position:center center;background-repeat:no-repeat;background-attachment:fixed;min-height:200vh;width:100vw;height:100vh}.centered-container[_ngcontent-%COMP%]{text-align:center}.seat-row[_ngcontent-%COMP%]{display:flex;padding:5px;gap:10px}.seat[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;gap:10px;align-items:center;justify-content:center;border:1px solid #ccc;cursor:pointer;background-color:#c05a2b;border-top-left-radius:.5rem;border-top-right-radius:.5rem}.selected[_ngcontent-%COMP%]{background-color:green}.split-container[_ngcontent-%COMP%]{display:flex;height:100vh}.left-side[_ngcontent-%COMP%], .right-side[_ngcontent-%COMP%]{flex:1;padding:20px}.list[_ngcontent-%COMP%]{border:solid 1px #ccc;background-color:#ffffff1a;border-radius:5px;text-align:left;padding:10px;margin:0;list-style:none}.list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{list-style-type:none;border-bottom:solid 1px #8b8b8b;padding:8px 0}.list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child{border-bottom:none}.label[_ngcontent-%COMP%]{color:#fff;display:inline-block;width:100px}.label-pay[_ngcontent-%COMP%]{color:#000;display:inline-block;width:100px}.list-pay[_ngcontent-%COMP%]{color:#000;border:solid 1px #ccc;background-color:#ffffff1a;border-radius:5px;text-align:left;padding:10px;margin:0;list-style:none}.list-pay[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{list-style-type:none;border-bottom:solid 1px #8b8b8b;padding:8px 0}.list-pay[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child{border-bottom:none}.seat.blocked[_ngcontent-%COMP%]{background-color:#ccc!important;cursor:not-allowed}\"]\n  });\n  return SeatsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}