{"ast":null,"code":"import _classCallCheck from \"/Users/prakhyamylavaram/Desktop/SJSU/CMPE-202/Project_Theater/Movie-Theater-booking/ui-components/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/prakhyamylavaram/Desktop/SJSU/CMPE-202/Project_Theater/Movie-Theater-booking/ui-components/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { AuthenticationService } from 'app/services/authentication.service';\nimport { TheaterService } from 'app/services/theater.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/services/authentication.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"app/services/theater.service\";\nimport * as i5 from \"@angular/common\";\n\nvar _c0 = function _c0(a0) {\n  return {\n    \"bg-primary text-white\": a0\n  };\n};\n\nfunction ShowDatesComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function ShowDatesComponent_div_20_Template_div_click_0_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r4);\n      var date_r2 = restoredCtx.$implicit;\n      var ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.selectDate(date_r2));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var date_r2 = ctx.$implicit;\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, ctx_r0.isDateSelected(date_r2)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getFormattedDate(date_r2), \" \");\n  }\n}\n\nvar _c1 = function _c1(a0) {\n  return {\n    \"past-time\": a0\n  };\n};\n\nfunction ShowDatesComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵlistener(\"click\", function ShowDatesComponent_div_23_Template_div_click_0_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r7);\n      var st_r5 = restoredCtx.$implicit;\n      var ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(!ctx_r6.isShowTimePast(st_r5) && ctx_r6.selectShowTime(st_r5));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var st_r5 = ctx.$implicit;\n    var ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c1, ctx_r1.isShowTimePast(st_r5)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind2(2, 3, st_r5.show_time, \"shortTime\"), \" Screen: \", st_r5.screen_name, \" \");\n  }\n}\n\nexport var ShowDatesComponent = /*#__PURE__*/(function () {\n  var ShowDatesComponent = /*#__PURE__*/function () {\n    function ShowDatesComponent(auth, router, http, theaterSvc) {\n      _classCallCheck(this, ShowDatesComponent);\n\n      this.auth = auth;\n      this.router = router;\n      this.http = http;\n      this.theaterSvc = theaterSvc;\n      this.items = ['Item 1', 'Item 2', 'Item 3', 'Item 4'];\n      this.currentDate = new Date();\n      this.dates = [];\n      this.selectedDate = null; // Store the selected date\n    }\n\n    _createClass(ShowDatesComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        this.selectedDate = this.currentDate;\n        this.generateDates(); //this.fetchMovieDetails();\n\n        var navbar = document.getElementsByTagName('nav')[0];\n        navbar.classList.add('navbar-transparent');\n        var movieId = this.theaterSvc.selected_movie;\n        var params = new HttpParams().set('movie_id', this.theaterSvc.selected_movie) // Add your parameters here\n        .set('theater_id', this.theaterSvc.selected_theater);\n        this.http.get('/api/theaters/show_time', {\n          params: params\n        }).subscribe(function (res) {\n          _this.show_times = res;\n        }); //   this.http.get(`/api/movies/details/${movieId}`).subscribe((res: any) => {\n        //     this.movieDetails = res;\n        // });\n      }\n    }, {\n      key: \"selectShowTime\",\n      value: function selectShowTime(st) {\n        console.log(st);\n        this.theaterSvc.selected_screen = st;\n        this.theaterSvc.selected_date = this.selectedDate;\n        this.router.navigate(['/seats']);\n      }\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {\n        var navbar = document.getElementsByTagName('nav')[0];\n        navbar.classList.remove('navbar-transparent');\n      }\n    }, {\n      key: \"generateDates\",\n      value: function generateDates() {\n        var dates = [];\n        var today = new Date();\n        today.setHours(0, 0, 0, 0);\n\n        for (var i = 0; i <= 6; i++) {\n          // Display 7 days, including today\n          var newDate = new Date(this.currentDate);\n          newDate.setDate(this.currentDate.getDate() + i);\n\n          if (newDate >= today) {\n            dates.push(newDate);\n          } //this.dates.push(newDate);\n\n        }\n\n        this.dates = dates;\n      }\n    }, {\n      key: \"isToday\",\n      value: function isToday(date) {\n        var today = new Date();\n        return date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();\n      } // getFormattedDate(date: Date): string {\n      //   const options: Intl.DateTimeFormatOptions = {\n      //     weekday: 'short',\n      //     month: 'short',\n      //     day: 'numeric',\n      //   };\n      //   if (this.isToday(date)) {\n      //     return 'Today, ' + date.toLocaleDateString('en-US', { day: 'numeric', month: 'short' });\n      //   } else {\n      //     return date.toLocaleDateString('en-US', { day: 'numeric', month: 'short' });\n      //   }\n      // }\n\n    }, {\n      key: \"getFormattedDate\",\n      value: function getFormattedDate(date) {\n        var options = {\n          weekday: 'short',\n          month: 'short',\n          day: 'numeric'\n        };\n\n        if (this.isToday(date)) {\n          return 'Today, ' + date.toLocaleDateString('en-US', options);\n        } else {\n          return date.toLocaleDateString('en-US', options);\n        }\n      }\n    }, {\n      key: \"selectDate\",\n      value: function selectDate(date) {\n        this.selectedDate = date; // Set the selected date when a date is clicked\n      }\n    }, {\n      key: \"isDateSelected\",\n      value: function isDateSelected(date) {\n        return this.selectedDate !== null && date.getTime() === this.selectedDate.getTime();\n      }\n    }]);\n\n    return ShowDatesComponent;\n  }();\n\n  ShowDatesComponent.ɵfac = function ShowDatesComponent_Factory(t) {\n    return new (t || ShowDatesComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject(i4.TheaterService));\n  };\n\n  ShowDatesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ShowDatesComponent,\n    selectors: [[\"app-showdates\"]],\n    decls: 24,\n    vars: 8,\n    consts: [[1, \"background\"], [\"filter-color\", \"orange\", 1, \"page-header\", \"login-page\", \"navbar-transparent\"], [1, \"page-header-image\", 2, \"background-image\", \"url('assets/img/bg_img.jpeg')\"], [1, \"container\"], [1, \"container\", \"mt-5\"], [1, \"col-22\", \"mb-4\"], [1, \"col-auto\"], [1, \"col-md-12\"], [1, \"card\", \"date-card\"], [1, \"card-header\"], [1, \"card-body\", 2, \"background-color\", \"black\"], [1, \"dates\", \"d-flex\", \"justify-content-center\", \"flex-wrap\"], [\"class\", \"date-box m-0.6\", \"style\", \"background-color: rgb(20, 20, 20); color: white\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"show_times\", \"d-flex\", \"justify-content-center\", \"flex-wrap\"], [\"class\", \"date-box m-2\", \"style\", \"background-color: rgb(255, 135, 6); color: white\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"date-box\", \"m-0.6\", 2, \"background-color\", \"rgb(20, 20, 20)\", \"color\", \"white\", 3, \"ngClass\", \"click\"], [1, \"date-box\", \"m-2\", 2, \"background-color\", \"rgb(255, 135, 6)\", \"color\", \"white\", 3, \"ngClass\", \"click\"]],\n    template: function ShowDatesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelement(4, \"br\")(5, \"br\")(6, \"br\");\n        i0.ɵɵelementStart(7, \"div\", 4)(8, \"h1\", 5);\n        i0.ɵɵtext(9, \"SHOWTIMES\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"h3\", 6);\n        i0.ɵɵtext(11);\n        i0.ɵɵpipe(12, \"uppercase\");\n        i0.ɵɵpipe(13, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 7)(15, \"div\", 8)(16, \"div\", 9);\n        i0.ɵɵtext(17, \" Dates \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 10)(19, \"div\", 11);\n        i0.ɵɵtemplate(20, ShowDatesComponent_div_20_Template, 2, 4, \"div\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"div\")(22, \"div\", 13);\n        i0.ɵɵtemplate(23, ShowDatesComponent_div_23_Template, 3, 8, \"div\", 14);\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵtextInterpolate1(\"FOR \", i0.ɵɵpipeBind1(12, 3, i0.ɵɵpipeBind2(13, 5, ctx.selectedDate, \"fullDate\")), \"\");\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngForOf\", ctx.dates);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.show_times);\n      }\n    },\n    dependencies: [i5.NgClass, i5.NgForOf, i5.UpperCasePipe, i5.DatePipe],\n    styles: [\".card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0003;border-radius:10px;overflow:hidden}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-weight:700}.border[_ngcontent-%COMP%]{border:3px solid #000}.bg-primary[_ngcontent-%COMP%]{background-color:#e55437!important}p-card[_ngcontent-%COMP%]{cursor:pointer}.date-box[_ngcontent-%COMP%]{min-width:120px;min-height:100px;display:flex;align-items:center;justify-content:center;font-size:1rem;line-height:2rem;margin:30px}.selected[_ngcontent-%COMP%]{background-color:#007bff!important;color:#fff;cursor:pointer}.past-time[_ngcontent-%COMP%]{background-color:#d3d3d3!important;color:#434040}.past-time[_ngcontent-%COMP%]{background-color:#d3d3d3!important;color:#434040;pointer-events:none;cursor:default}.page-header-image[_ngcontent-%COMP%]{background-size:cover;background-repeat:repeat;background-attachment:scroll}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}.card-header[_ngcontent-%COMP%]{background-color:#000;color:#fff;border-bottom:1.5px solid white;text-align:center;font-weight:700;padding:1rem}.card-body[_ngcontent-%COMP%]{padding:20px;background-color:#f8f9fa}.page-header-image[_ngcontent-%COMP%]{display:flex;background-repeat:repeat-y}.date-box[_ngcontent-%COMP%], .time-box[_ngcontent-%COMP%]{cursor:pointer;background-color:#fff;color:#333;text-align:center;padding:10px 20px;border-radius:20px;border:1px solid #dee2e6;margin:5px;transition:background-color .3s,color .3s}.bg-primary.text-white[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.date-box[_ngcontent-%COMP%]:hover, .time-box[_ngcontent-%COMP%]:hover{background-color:#0056b3;color:#fff}.show-times[_ngcontent-%COMP%]   .time-box[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;padding:10px 20px}.show-times[_ngcontent-%COMP%]   .time-box[_ngcontent-%COMP%]:hover{background-color:#138496}.date-card[_ngcontent-%COMP%]{background-color:#605e5e}\"]\n  });\n  return ShowDatesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}